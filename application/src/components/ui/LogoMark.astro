---
import type { ImageMetadata } from 'astro';
import logoAsset from '../../assets/logo.svg';

interface Props {
	size?: number;
	label?: string;
	ariaHidden?: boolean;
}

const {
	size = 48,
	label = 'ESCEMI logo',
	ariaHidden = true,
} = Astro.props;

const logoMetadata = logoAsset as ImageMetadata;
const logoSrc = logoMetadata?.src ?? (logoAsset as unknown as string);
const aspectRatio = logoMetadata?.width && logoMetadata?.height ? logoMetadata.height / logoMetadata.width : 1;
const height = Math.max(1, Math.round(size * aspectRatio));
const shouldDescribe = !ariaHidden;
---

<img
	src={logoSrc}
	alt={shouldDescribe ? label : ''}
	aria-hidden={ariaHidden}
	width={size}
	height={height}
	loading="lazy"
	decoding="async"
	class="drop-shadow-[0_0_25px_rgba(236,184,7,0.25)]"
	style={`width: ${size}px; height: ${height}px;`}
/>
