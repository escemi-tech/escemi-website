---
import { getRelativeLocaleUrl } from 'astro:i18n';
import type { Locale, MetaCopy } from '../../i18n.config';
import { LOCALE_LABELS, SITE_NAME, SUPPORTED_LOCALES } from '../../i18n.config';

interface Props {
	locale: Locale;
	meta: MetaCopy;
}

const { locale, meta } = Astro.props;
---

<!doctype html>
<html lang={locale}>
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{meta.title}</title>
		<meta name="description" content={meta.description} />
	</head>
	<body>
		<header class="site-header">
			<div class="site-header__inner">
				<strong class="site-header__brand">{SITE_NAME}</strong>
				<nav aria-label="Language selector">
					<ul class="locale-switcher">
						{SUPPORTED_LOCALES.map((code) => (
							<li>
								{code === locale ? (
									<span aria-current="true">{LOCALE_LABELS[code]}</span>
								) : (
									<a href={getRelativeLocaleUrl(code, Astro.url.pathname)}>
										{LOCALE_LABELS[code]}
									</a>
								)}
							</li>
						))}
					</ul>
				</nav>
			</div>
		</header>
		<main class="page-content">
			<slot />
		</main>
	</body>
</html>

<style>
:global(body) {
	margin: 0;
	font-family: Inter, Roboto, 'Helvetica Neue', 'Arial Nova', 'Nimbus Sans', Arial, sans-serif;
	background-color: #040308;
	color: #111827;
}

.site-header {
	position: sticky;
	top: 0;
	background: rgba(4, 3, 8, 0.75);
	border-bottom: 1px solid rgba(255, 255, 255, 0.08);
	backdrop-filter: blur(12px);
	padding: 0.5rem 1rem;
}

.site-header__inner {
	margin: 0 auto;
	max-width: 960px;
	display: flex;
	align-items: center;
	justify-content: space-between;
}

.site-header__brand {
	color: white;
	letter-spacing: 0.04em;
}

.locale-switcher {
	list-style: none;
	margin: 0;
	padding: 0;
	display: flex;
	gap: 0.5rem;
}

.locale-switcher a,
.locale-switcher span {
	color: white;
	text-decoration: none;
	font-size: 0.875rem;
	padding: 0.25rem 0.5rem;
	border-radius: 999px;
}

.locale-switcher span {
	background: rgba(255, 255, 255, 0.15);
}

.locale-switcher a:hover {
	background: rgba(255, 255, 255, 0.1);
}

.page-content {
	margin: 0 auto;
	max-width: 960px;
	padding: 2rem 1rem 4rem;
}

@media (max-width: 640px) {
	.site-header__inner {
		flex-direction: column;
		gap: 0.5rem;
	}

	.page-content {
		padding: 1.5rem 1rem 3rem;
	}
}
</style>
