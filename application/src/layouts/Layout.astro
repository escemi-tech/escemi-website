---
import { getRelativeLocaleUrl } from 'astro:i18n';
import type { Locale, MetaCopy } from '../../i18n.config';
import { LOCALE_LABELS, SITE_NAME, SUPPORTED_LOCALES } from '../../i18n.config';

interface Props {
	locale: Locale;
	meta: MetaCopy;
}

const { locale, meta } = Astro.props;
---

<!doctype html>
<html lang={locale}>
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet" />
		<meta name="generator" content={Astro.generator} />
		<title>{meta.title}</title>
		<meta name="description" content={meta.description} />
	</head>
	<body>
		<header class="site-header">
			<div class="site-header__inner">
				<strong class="site-header__brand">{SITE_NAME}</strong>
				<nav aria-label="Language selector">
					<ul class="locale-switcher">
						{SUPPORTED_LOCALES.map((code) => (
							<li>
								{code === locale ? (
									<span aria-current="true">{LOCALE_LABELS[code]}</span>
								) : (
									<a href={getRelativeLocaleUrl(code, Astro.url.pathname)}>
										{LOCALE_LABELS[code]}
									</a>
								)}
							</li>
						))}
					</ul>
				</nav>
			</div>
		</header>
		<main class="page-content">
			<slot />
		</main>
	</body>
</html>

<style>
:global(body) {
	margin: 0;
	font-family: 'Source Sans Pro', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
	background-color: #0a0e14;
	color: #ffffff;
	line-height: 1.6;
}

.site-header {
	position: sticky;
	top: 0;
	background: #1c3144;
	border-bottom: 1px solid rgba(236, 184, 7, 0.2);
	backdrop-filter: blur(12px);
	padding: 1rem 2rem;
	z-index: 100;
}

.site-header__inner {
	margin: 0 auto;
	max-width: 960px;
	display: flex;
	align-items: center;
	justify-content: space-between;
}

.site-header__brand {
	color: white;
	letter-spacing: 0.08em;
	font-size: 1.25rem;
	font-weight: 700;
}

.locale-switcher {
	list-style: none;
	margin: 0;
	padding: 0;
	display: flex;
	gap: 0.5rem;
}

.locale-switcher a,
.locale-switcher span {
	color: white;
	text-decoration: none;
	font-size: 0.875rem;
	font-weight: 600;
	padding: 0.5rem 1rem;
	border-radius: 2px;
	transition: all 0.2s ease;
}

.locale-switcher span {
	background: rgba(236, 184, 7, 0.15);
	border: 1px solid rgba(236, 184, 7, 0.3);
}

.locale-switcher a:hover {
	background: rgba(255, 255, 255, 0.05);
	border: 1px solid rgba(236, 184, 7, 0.2);
}

.page-content {
	margin: 0 auto;
	max-width: 1400px;
	padding: 0;
	background: linear-gradient(180deg, #0a0e14 0%, #1c3144 100%);
}

@media (max-width: 640px) {
	.site-header__inner {
		flex-direction: column;
		gap: 0.5rem;
	}

	.page-content {
		padding: 1.5rem 1rem 3rem;
	}
}
</style>
